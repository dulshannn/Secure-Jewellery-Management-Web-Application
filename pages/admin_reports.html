<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SJM | Operations Command</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* --- 1. LUXURY THEME VARIABLES --- */
        :root {
            --gold-primary: #d4af37;
            --gold-dim: rgba(212, 175, 55, 0.1);
            --gold-glow: rgba(212, 175, 55, 0.4);
            --bg-dark: #050505;
            --panel-dark: #101010;
            --text-main: #e0e0e0;
            --text-muted: #888;
            --glass-bg: rgba(20, 20, 20, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
            --danger: #ff4d4d;
            --success: #00e676;
            --font-head: 'Playfair Display', serif;
            --font-ui: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: var(--font-ui);
            height: 100vh;
            display: flex;
            overflow: hidden;
            background-image: radial-gradient(circle at 10% 10%, rgba(20, 20, 20, 1), transparent), 
                              url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
        }

        /* --- 2. SIDEBAR NAVIGATION --- */
        .sidebar {
            width: 280px;
            background: rgba(10, 10, 10, 0.95);
            border-right: 1px solid var(--glass-border);
            padding: 40px 25px;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }

        .brand {
            font-family: var(--font-head);
            font-size: 1.8rem;
            color: var(--gold-primary);
            margin-bottom: 60px;
            letter-spacing: 1px;
            display: flex; align-items: center; gap: 10px;
        }
        
        .nav-item {
            padding: 16px 20px;
            margin-bottom: 12px;
            color: var(--text-muted);
            text-decoration: none;
            border-radius: 8px;
            transition: 0.3s;
            display: flex; align-items: center; gap: 15px;
            font-size: 0.95rem;
            border: 1px solid transparent;
        }
        
        .nav-item:hover, .nav-item.active {
            background: var(--gold-dim);
            color: var(--gold-primary);
            border-color: rgba(212, 175, 55, 0.2);
        }
        .nav-item i { width: 20px; text-align: center; font-size: 1.1rem; }

        /* --- 3. MAIN CONTENT AREA --- */
        .main-content {
            flex: 1;
            padding: 40px 60px;
            overflow-y: auto;
            position: relative;
        }

        .header {
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 50px; padding-bottom: 20px;
            border-bottom: 1px solid var(--glass-border);
        }
        .page-title span { display: block; font-family: var(--font-mono); font-size: 0.8rem; color: var(--gold-primary); letter-spacing: 2px; margin-bottom: 5px; }
        .page-title h1 { font-family: var(--font-head); font-size: 2.5rem; color: #fff; }

        /* Tabs System */
        .tab-panel { display: none; animation: fadeIn 0.5s ease-out; }
        .tab-panel.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- MODULE 1: REPORTS UI --- */
        .dashboard-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; margin-bottom: 30px;
        }
        
        /* Interactive Cards */
        .card {
            background: var(--panel-dark);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s, border-color 0.3s;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--gold-dim); }
        
        /* Glow Effect for Cards */
        .card::before {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), var(--gold-dim), transparent 40%);
            opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 1;
        }
        .card:hover::before { opacity: 1; }

        .card-label { font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; position: relative; z-index: 2; }
        .card-value { font-family: var(--font-head); font-size: 2.2rem; color: #fff; margin-top: 10px; position: relative; z-index: 2; }
        .trend { font-size: 0.8rem; margin-top: 5px; position: relative; z-index: 2; }
        .trend.up { color: var(--success); } .trend.down { color: var(--danger); }

        /* Filters Bar */
        .filter-bar {
            display: flex; gap: 15px; background: #0a0a0a; padding: 15px;
            border-radius: 8px; border: 1px solid var(--glass-border); margin-bottom: 25px; align-items: center;
        }
        .control-input {
            background: #151515; border: 1px solid #333; color: #fff;
            padding: 10px 15px; border-radius: 6px; font-family: var(--font-ui); outline: none;
        }
        .control-input:focus { border-color: var(--gold-primary); }
        
        .btn-action {
            padding: 10px 20px; background: transparent; border: 1px solid var(--gold-primary);
            color: var(--gold-primary); border-radius: 6px; cursor: pointer; transition: 0.3s;
            font-weight: 600; font-size: 0.9rem; display: flex; align-items: center; gap: 8px;
        }
        .btn-action:hover { background: var(--gold-primary); color: #000; }
        .btn-filled { background: var(--gold-primary); color: #000; }
        .btn-filled:hover { box-shadow: 0 0 15px var(--gold-dim); }

        /* Charts Area */
        .charts-wrapper { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; }
        .chart-box { padding: 25px; height: 350px; }

        /* --- MODULE 2: BACKUP & RESTORE UI --- */
        .backup-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 40px;
            background: linear-gradient(145deg, #101010, #0a0a0a);
            padding: 50px; border-radius: 20px; border: 1px solid var(--glass-border);
        }
        
        .system-health {
            text-align: center; padding-right: 40px; border-right: 1px solid #222;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .health-ring {
            width: 180px; height: 180px; border-radius: 50%;
            border: 4px solid #222; border-top: 4px solid var(--success);
            display: flex; align-items: center; justify-content: center;
            font-size: 3rem; color: var(--success);
            box-shadow: 0 0 30px rgba(0, 230, 118, 0.1);
            animation: pulseRing 3s infinite;
        }
        @keyframes pulseRing { 0% { box-shadow: 0 0 0 rgba(0,230,118,0.1); } 50% { box-shadow: 0 0 40px rgba(0,230,118,0.2); } 100% { box-shadow: 0 0 0 rgba(0,230,118,0.1); } }
        
        .backup-actions h3 { font-family: var(--font-head); font-size: 1.5rem; margin-bottom: 15px; }
        .backup-list { margin-top: 30px; border-top: 1px solid #222; padding-top: 20px; }
        .backup-item {
            display: flex; justify-content: space-between; padding: 12px 0;
            border-bottom: 1px solid #1a1a1a; color: #888; font-family: var(--font-mono); font-size: 0.9rem;
        }

        /* --- MODULE 3: LOGS UI --- */
        .logs-wrapper {
            background: #080808; border: 1px solid #222; border-radius: 10px; overflow: hidden;
        }
        .logs-table {
            width: 100%; border-collapse: collapse;
            font-family: var(--font-mono); font-size: 0.9rem;
        }
        .logs-table th {
            text-align: left; padding: 18px 25px; color: #666; font-size: 0.8rem; text-transform: uppercase;
            background: #111; border-bottom: 1px solid #333;
        }
        .logs-table td {
            padding: 15px 25px; border-bottom: 1px solid #1a1a1a; color: #ccc;
        }
        .logs-table tr:hover { background: #121212; }
        
        .log-tag { padding: 4px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: bold; }
        .tag-info { background: rgba(0, 123, 255, 0.15); color: #4dabf7; }
        .tag-warn { background: rgba(255, 193, 7, 0.15); color: #ffd43b; }
        .tag-err { background: rgba(255, 77, 77, 0.15); color: #ff6b6b; }

        .pagination {
            padding: 15px 25px; display: flex; justify-content: space-between; align-items: center;
            border-top: 1px solid #222; color: #666; font-size: 0.9rem;
        }

        /* --- POPUPS & TOASTS --- */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000;
            justify-content: center; align-items: center; backdrop-filter: blur(5px);
        }
        .modal-box {
            background: #151515; padding: 40px; border-radius: 12px; width: 450px;
            border: 1px solid var(--glass-border); text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            animation: slideUp 0.3s ease-out;
        }
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .toast {
            position: fixed; top: 30px; right: 30px;
            background: #111; border-left: 4px solid var(--gold-primary);
            padding: 20px 30px; border-radius: 8px; box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            display: none; animation: slideInRight 0.5s ease-out; z-index: 2000;
        }
        .toast h4 { color: #fff; margin-bottom: 5px; }
        .toast p { color: #888; font-size: 0.9rem; }
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }

    </style>
</head>
<body onmousemove="updateGlow(event)">

    <nav class="sidebar">
        <div class="brand">
            <i class="fa-solid fa-diamond"></i> SJM ADMIN
        </div>
        <a href="#" class="nav-item active" onclick="showTab('reports', this)">
            <i class="fa-solid fa-chart-line"></i> Analytics
        </a>
        <a href="#" class="nav-item" onclick="showTab('backup', this)">
            <i class="fa-solid fa-server"></i> System Health
        </a>
        <a href="#" class="nav-item" onclick="showTab('logs', this)">
            <i class="fa-solid fa-terminal"></i> Audit Logs
        </a>
        <div style="margin-top: auto;">
            <a href="index.php" class="nav-item" style="color: var(--danger);">
                <i class="fa-solid fa-power-off"></i> Logout
            </a>
        </div>
    </nav>

    <main class="main-content">
        
        <header class="header">
            <div class="page-title">
                <span>SYSTEM COMMAND</span>
                <h1 id="pageHeading">Analytics Overview</h1>
            </div>
            <div style="text-align: right; color: var(--text-muted); font-size: 0.9rem;">
                <p>Status: <span style="color: var(--success);">‚óè Online</span></p>
                <p>Node: Secure-01</p>
            </div>
        </header>

        <div id="reports" class="tab-panel active">
            <div class="filter-bar">
                <i class="fa-regular fa-calendar" style="color:#666"></i>
                <input type="date" class="control-input">
                <span style="color:#666">to</span>
                <input type="date" class="control-input">
                
                <select class="control-input" style="width: 150px;">
                    <option>All Assets</option>
                    <option>Gold Inventory</option>
                    <option>Gemstones</option>
                </select>

                <div style="margin-left: auto; display: flex; gap: 10px;">
                    <button class="btn-action" onclick="showToast('Success', 'Report exported as PDF')">
                        <i class="fa-solid fa-file-pdf"></i> PDF
                    </button>
                    <button class="btn-action" onclick="showToast('Success', 'Data exported as CSV')">
                        <i class="fa-solid fa-file-csv"></i> CSV
                    </button>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-label">Total Inventory Value</div>
                    <div class="card-value">$4.2M</div>
                    <div class="trend up"><i class="fa-solid fa-arrow-trend-up"></i> +12% this month</div>
                </div>
                <div class="card">
                    <div class="card-label">Pending Deliveries</div>
                    <div class="card-value">28</div>
                    <div class="trend"><span style="color: #aaa;">-- Supplier Awaiting</span></div>
                </div>
                <div class="card">
                    <div class="card-label">Low Stock Alerts</div>
                    <div class="card-value" style="color: var(--danger);">5</div>
                    <div class="trend down">Action Required</div>
                </div>
                <div class="card">
                    <div class="card-label">Active Users</div>
                    <div class="card-value">142</div>
                    <div class="trend up">+8 New today</div>
                </div>
            </div>

            <div class="charts-wrapper">
                <div class="card chart-box">
                    <div class="card-label" style="margin-bottom: 20px;">Revenue Trend (2025)</div>
                    <canvas id="revenueChart"></canvas>
                </div>
                <div class="card chart-box">
                    <div class="card-label" style="margin-bottom: 20px;">Metal Composition</div>
                    <canvas id="stockChart"></canvas>
                </div>
            </div>
        </div>

        <div id="backup" class="tab-panel">
            <div class="backup-container">
                <div class="system-health">
                    <div class="health-ring">
                        <i class="fa-solid fa-check"></i>
                    </div>
                    <h2 style="font-family: var(--font-head); margin-top: 20px; color: #fff;">System Secure</h2>
                    <p style="color: #666; margin-top: 10px; font-family: var(--font-mono);">LAST SNAPSHOT: 09:45 AM</p>
                </div>

                <div class="backup-actions">
                    <h3>Data Operations</h3>
                    <p style="color: #999; line-height: 1.6; margin-bottom: 30px;">
                        Perform a manual snapshot of the database. All user data, inventory logs, and image references will be secured.
                    </p>

                    <div style="display: flex; gap: 20px;">
                        <button class="btn-action btn-filled" onclick="performBackup()">
                            <i class="fa-solid fa-cloud-arrow-up"></i> Backup Now
                        </button>
                        
                        <button class="btn-action" style="border-color: var(--danger); color: var(--danger);" onclick="document.getElementById('restoreModal').style.display='flex'">
                            <i class="fa-solid fa-rotate-left"></i> Restore Data
                        </button>
                    </div>

                    <div class="backup-list">
                        <div class="backup-item">
                            <span><i class="fa-solid fa-database"></i> auto_backup_v2.4.sql</span>
                            <span>Today, 09:45 AM</span>
                        </div>
                        <div class="backup-item">
                            <span><i class="fa-solid fa-database"></i> manual_save_01.sql</span>
                            <span>Yesterday, 04:20 PM</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="logs" class="tab-panel">
            <div class="filter-bar">
                <i class="fa-solid fa-magnifying-glass" style="color:#666"></i>
                <input type="text" class="control-input" style="width: 300px;" placeholder="Search logs (User ID, IP, Error Code)...">
                
                <select class="control-input">
                    <option>All Levels</option>
                    <option>Info</option>
                    <option>Warning</option>
                    <option>Critical</option>
                </select>

                <div style="margin-left: auto; font-family: var(--font-mono); color: #666; font-size: 0.8rem;">
                    LIVE STREAMING...
                </div>
            </div>

            <div class="logs-wrapper">
                <table class="logs-table">
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Level</th>
                            <th>User Principal</th>
                            <th>Action Details</th>
                            <th>IP Origin</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2025-12-05 12:45:01</td>
                            <td><span class="log-tag tag-info">INFO</span></td>
                            <td>admin_lakindu</td>
                            <td>Report Exported (PDF)</td>
                            <td>192.168.1.10</td>
                        </tr>
                        <tr>
                            <td>2025-12-05 12:42:15</td>
                            <td><span class="log-tag tag-warn">WARN</span></td>
                            <td>system_bot</td>
                            <td>High latency on DB Connection</td>
                            <td>LOCALHOST</td>
                        </tr>
                        <tr>
                            <td>2025-12-05 11:30:00</td>
                            <td><span class="log-tag tag-err">CRITICAL</span></td>
                            <td>user_guest</td>
                            <td>Failed Login (3 Attempts)</td>
                            <td>10.0.0.5</td>
                        </tr>
                        <tr>
                            <td>2025-12-05 10:15:22</td>
                            <td><span class="log-tag tag-info">INFO</span></td>
                            <td>manager_01</td>
                            <td>Inventory Updated (Gold Ring)</td>
                            <td>192.168.1.12</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="pagination">
                    <span>Showing 1-4 of 128 logs</span>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn-action" style="padding: 5px 15px; font-size: 0.8rem;">Prev</button>
                        <button class="btn-action" style="padding: 5px 15px; font-size: 0.8rem;">Next</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <div id="restoreModal" class="modal">
        <div class="modal-box">
            <i class="fa-solid fa-triangle-exclamation" style="font-size: 3rem; color: var(--danger); margin-bottom: 20px;"></i>
            <h2 style="font-family: var(--font-head); color: #fff; margin-bottom: 10px;">System Restore</h2>
            <p style="color: #aaa; font-size: 0.9rem; margin-bottom: 30px;">
                You are about to revert the system to a previous state. Any data created after the backup point will be lost.
            </p>
            
            <select class="control-input" style="width: 100%; margin-bottom: 20px;">
                <option>Select Restore Point...</option>
                <option>auto_backup_v2.4.sql (Today)</option>
            </select>

            <button class="btn-action btn-filled" style="width: 100%; background: var(--danger); border-color: var(--danger); justify-content: center; margin-bottom: 10px;" onclick="confirmRestore()">
                CONFIRM OVERWRITE
            </button>
            <button class="btn-action" style="width: 100%; border-color: #333; color: #888; justify-content: center;" onclick="document.getElementById('restoreModal').style.display='none'">
                CANCEL
            </button>
        </div>
    </div>

    <div id="toast" class="toast">
        <h4 id="toastTitle">Notification</h4>
        <p id="toastMsg">Action completed successfully.</p>
    </div>

    <script>
        // --- TABS LOGIC ---
        function showTab(tabId, btn) {
            document.querySelectorAll('.tab-panel').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            btn.classList.add('active');

            const titles = {
                'reports': 'Analytics Overview',
                'backup': 'System Health',
                'logs': 'Security Audit Log'
            };
            document.getElementById('pageHeading').innerText = titles[tabId];
        }

        // --- MOUSE GLOW EFFECT ---
        function updateGlow(e) {
            document.querySelectorAll('.card').forEach(card => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty("--mouse-x", `${x}px`);
                card.style.setProperty("--mouse-y", `${y}px`);
            });
        }

        // --- CHART.JS CONFIG (Gold Theme) ---
        const ctx = document.getElementById('revenueChart').getContext('2d');
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, 'rgba(212, 175, 55, 0.5)');
        gradient.addColorStop(1, 'rgba(212, 175, 55, 0)');

        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Revenue',
                    data: [12000, 19000, 15000, 25000, 22000, 30000],
                    borderColor: '#d4af37',
                    backgroundColor: gradient,
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { display: false }, ticks: { color: '#666' } },
                    y: { grid: { color: '#222' }, ticks: { color: '#666' } }
                }
            }
        });

        new Chart(document.getElementById('stockChart'), {
            type: 'doughnut',
            data: {
                labels: ['Gold', 'Silver', 'Platinum'],
                datasets: [{
                    data: [65, 25, 10],
                    backgroundColor: ['#d4af37', '#777', '#ccc'],
                    borderWidth: 0
                }]
            },
            options: { cutout: '75%', plugins: { legend: { position: 'right', labels: { color: '#aaa' } } } }
        });

        // --- BACKUP SIMULATION ---
        function performBackup() {
            const btn = event.currentTarget;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Processing...';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                showToast('Success', 'System snapshot created successfully.');
            }, 2000);
        }

        // --- RESTORE LOGIC ---
        function confirmRestore() {
            document.getElementById('restoreModal').style.display = 'none';
            showToast('System Alert', 'Restore process initiated. System will reboot shortly.');
        }

        // --- TOAST NOTIFICATION ---
        function showToast(title, msg) {
            const t = document.getElementById('toast');
            document.getElementById('toastTitle').innerText = title;
            document.getElementById('toastMsg').innerText = msg;
            t.style.display = 'block';
            setTimeout(() => t.style.display = 'none', 3000);
        }
    </script>
</body>
</html>