<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Inventory | Secure Jewellery Management</title>
    <style>
        /* --- THEME VARIABLES (Consistent with previous pages) --- */
        :root {
            --bg-color: #1a1a1a;
            --panel-bg: #2c2c2c;
            --input-bg: #333;
            --text-main: #fff;
            --text-muted: #ccc;
            --accent-gold: #d4af37;
            --danger-red: #d9534f;
            --border-color: #444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            min-height: 100vh;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 250px;
            background-color: var(--panel-bg);
            border-right: 1px solid var(--accent-gold);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .sidebar h2 { color: var(--accent-gold); font-weight: 300; margin-bottom: 40px; text-align: center; }
        .menu-item {
            padding: 15px;
            color: var(--text-muted);
            text-decoration: none;
            border-bottom: 1px solid var(--border-color);
            transition: 0.3s;
        }
        .menu-item:hover, .menu-item.active { background-color: var(--input-bg); color: var(--accent-gold); }
        
        /* --- MAIN CONTENT --- */
        .main-content {
            flex-grow: 1;
            padding: 40px;
            overflow-y: auto;
        }

        .header-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .page-title { font-size: 2rem; font-weight: 300; }

        .btn-gold {
            background-color: var(--accent-gold);
            color: #1a1a1a;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-gold:hover { opacity: 0.9; }

        /* --- TASK 1: JEWELLERY LIST PAGE (TABLE) --- */
        .table-container {
            background-color: var(--panel-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        table { width: 100%; border-collapse: collapse; }
        
        thead { background-color: var(--input-bg); }
        th { text-align: left; padding: 15px; color: var(--accent-gold); font-weight: 600; }
        
        td { padding: 15px; border-bottom: 1px solid var(--border-color); color: var(--text-muted); }
        tr:hover { background-color: #383838; }

        .action-btns { display: flex; gap: 10px; }
        
        .btn-edit { background-color: #444; color: #fff; padding: 5px 10px; border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer; }
        .btn-edit:hover { border-color: var(--accent-gold); color: var(--accent-gold); }

        .btn-delete { background-color: #444; color: #ff6b6b; padding: 5px 10px; border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer; }
        .btn-delete:hover { background-color: var(--danger-red); color: white; border-color: var(--danger-red); }

        /* --- MODAL STYLES (Used for Task 2, 3, & 4) --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal {
            background-color: var(--panel-bg);
            padding: 30px;
            border-radius: 8px;
            width: 100%;
            max-width: 500px;
            border-top: 4px solid var(--accent-gold);
            position: relative;
        }

        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-title { font-size: 1.5rem; color: var(--accent-gold); }
        .close-btn { background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; }

        /* --- TASK 2 & 3: FORM STYLES --- */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: var(--text-muted); }
        .form-group input, .form-group select {
            width: 100%; padding: 10px; background-color: var(--input-bg);
            border: 1px solid var(--border-color); color: white; border-radius: 4px;
        }
        .form-group input:focus { outline: none; border-color: var(--accent-gold); }

        /* --- TASK 4: DELETE POPUP STYLES --- */
        .delete-content { text-align: center; }
        .delete-content p { margin-bottom: 20px; font-size: 1.1rem; }
        .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }
        
        .btn-cancel { background-color: #555; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        .btn-confirm-delete { background-color: var(--danger-red); color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }

    </style>
</head>
<body>

    <div class="sidebar">
        <h2>SJM Admin</h2>
        <a href="#" class="menu-item">Dashboard</a>
        <a href="#" class="menu-item active">Inventory Management</a>
        <a href="#" class="menu-item">Suppliers</a>
        <a href="#" class="menu-item">Reports</a>
        <a href="#" class="menu-item">Settings</a>
    </div>

    <div class="main-content">
        <div class="header-actions">
            <h1 class="page-title">Jewellery Inventory</h1>
            <button class="btn-gold" onclick="openModal('modal-jewellery', 'Add New Jewellery')">
                + Add New Item
            </button>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Type</th>
                        <th>Material</th>
                        <th>Weight (g)</th>
                        <th>Price ($)</th>
                        <th>Qty</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>101</td>
                        <td>Ring</td>
                        <td>22k Gold</td>
                        <td>4.50</td>
                        <td>450.00</td>
                        <td>12</td>
                        <td class="action-btns">
                            <button class="btn-edit" onclick="openEditModal(101, 'Ring', '22k Gold', 4.50, 450.00, 12)">Edit</button>
                            <button class="btn-delete" onclick="openDeleteModal(101)">Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>102</td>
                        <td>Necklace</td>
                        <td>18k White Gold</td>
                        <td>15.20</td>
                        <td>1,200.00</td>
                        <td>5</td>
                        <td class="action-btns">
                            <button class="btn-edit" onclick="openEditModal(102, 'Necklace', '18k White Gold', 15.20, 1200.00, 5)">Edit</button>
                            <button class="btn-delete" onclick="openDeleteModal(102)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="modal-jewellery" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title" class="modal-title">Add New Jewellery</h3>
                <button class="close-btn" onclick="closeModal('modal-jewellery')">&times;</button>
            </div>
            
            <form action="save_jewellery.php" method="POST">
                <input type="hidden" id="jewellery_id" name="jewellery_id"> <div class="form-group">
                    <label for="type">Type</label>
                    <select id="type" name="type" required>
                        <option value="Ring">Ring</option>
                        <option value="Necklace">Necklace</option>
                        <option value="Bangle">Bangle</option>
                        <option value="Earrings">Earrings</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="material">Material</label>
                    <input type="text" id="material" name="material" placeholder="e.g. 22k Gold" required>
                </div>

                <div class="form-group">
                    <label for="weight">Weight (grams)</label>
                    <input type="number" id="weight" name="weight" step="0.01" required>
                </div>

                <div class="form-group">
                    <label for="price">Price</label>
                    <input type="number" id="price" name="price" step="0.01" required>
                </div>

                <div class="form-group">
                    <label for="quantity">Quantity</label>
                    <input type="number" id="quantity" name="quantity" required>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal('modal-jewellery')">Cancel</button>
                    <button type="submit" class="btn-gold">Save Item</button>
                </div>
            </form>
        </div>
    </div>

    <div id="modal-delete" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" style="color: var(--danger-red);">Confirm Deletion</h3>
                <button class="close-btn" onclick="closeModal('modal-delete')">&times;</button>
            </div>
            <div class="delete-content">
                <p>Are you sure you want to delete this item? This action cannot be undone.</p>
                <div class="modal-actions" style="justify-content: center;">
                    <button type="button" class="btn-cancel" onclick="closeModal('modal-delete')">Cancel</button>
                    <form action="delete_jewellery.php" method="POST" style="display:inline;">
                        <input type="hidden" id="delete_id" name="delete_id">
                        <button type="submit" class="btn-confirm-delete">Delete Permanently</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Generic Close Function
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Open "Add" or generic Modal
        function openModal(modalId, title) {
            const modal = document.getElementById(modalId);
            document.getElementById('modal-title').innerText = title;
            
            // Clear form if it's the Add/Edit modal being opened as "Add"
            if(modalId === 'modal-jewellery') {
                document.getElementById('jewellery_id').value = '';
                document.getElementById('type').value = 'Ring';
                document.getElementById('material').value = '';
                document.getElementById('weight').value = '';
                document.getElementById('price').value = '';
                document.getElementById('quantity').value = '';
            }
            
            modal.style.display = 'flex';
        }

        // TASK 3: Open Edit Modal & Populate Data
        function openEditModal(id, type, material, weight, price, qty) {
            const modal = document.getElementById('modal-jewellery');
            document.getElementById('modal-title').innerText = 'Edit Jewellery';
            
            // Populate fields
            document.getElementById('jewellery_id').value = id;
            document.getElementById('type').value = type;
            document.getElementById('material').value = material;
            document.getElementById('weight').value = weight;
            document.getElementById('price').value = price;
            document.getElementById('quantity').value = qty;

            modal.style.display = 'flex';
        }

        // TASK 4: Open Delete Popup
        function openDeleteModal(id) {
            const modal = document.getElementById('modal-delete');
            document.getElementById('delete_id').value = id;
            modal.style.display = 'flex';
        }

        // Close modal when clicking outside content
        window.onclick = function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>
